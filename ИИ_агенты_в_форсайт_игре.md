# ИИ‑агенты как участники команды: индивидуально, как команды агентов и в смешанной команде с людьми

_Версия: 2025-10-05_

Источник: перевод книги Антонио Гулли «Agentic Design Patterns» (https://github.com/pridees/agentic-design-patterns-book-rus).

## Что важно из книги (по делу)
Опорные паттерны: **цепочки промптов → маршрутизация → параллелизация → рефлексия → использование инструментов → планирование → многоагентное сотрудничество → память/адаптация → MCP → человек‑в‑контуре → межагентная коммуникация → оценка/мониторинг**.

> Особое внимание для нашей игры: **Глава 15. Межагентная коммуникация** и **Глава 17. Техники рассуждения**.

### Короткие выжимки глав
- **Гл. 4 Рефлексия** — самооценка шага и улучшение следующего.
- **Гл. 5 Инструменты** — безопасное подключение внешних функций/данных.
- **Гл. 7 Многоагентное сотрудничество** — распределение ролей и координация.
- **Гл. 10 MCP** — стандартизированный доступ к ресурсам/контекстам.
- **Гл. 13 Человек‑в‑контуре** — точки врезки человека: этика/решения.
- **Гл. 16 Оптимизация под ресурсы** — лимиты времени/токенов/бюджета.
- **Гл. 19 Оценка и мониторинг** — как мерить качество/скорость/стоимость.
- **Гл. 15 Межагентная коммуникация (фокус)** — протоколы обмена сообщениями между агентами, маршрутизация задач, контракты «роль↔ожидаемый артефакт», согласование контекста и устойчивость к ошибкам/гонкам состояний.
- **Гл. 17 Техники рассуждения (фокус)** — планирующие и проверочные ходы: CoT/ToT/GoT, проверка альтернатив, «критик‑разработчик», self‑consistency, дебаты агентов, целевое разбиение на под‑цели.

---

## Как применить в форсайт‑игре

### 1) Агент как единичный исполнитель
**Когда:** атомарная задача с ясным KPI и доступом к данным/инструментам.  
**Паттерн:** «цепочка→инструменты→рефлексия».  
**Роли:** Scout (сбор сигналов), Synth (сшивка профилей), Critic (чек‑лист рисков).  
**KPI:** точность ссылок, полнота, время отклика, cost/token.

### 2) Микрокоманда агентов (2–5 узлов)
**Когда:** задачу нужно разложить на компетенции.  
**Оркестрация:** граф с handoff‑ами: Planner → Researcher(×2) → Analyst → PMF‑Tester → Referee → Planner (итерация).  
**Метрики:** lead time цикла, доля принятых гипотез, точность референсов, cost per hypothesis.

### 3) Смешанная команда «люди × агенты»
**Когда:** требуется суждение/этика/приоритизация/переговоры.  
**Human‑врезки:** фацилитатор (рамка, стоп‑решения), владелец домена (валидация), продюсер (время/токены).  
**Гарантии качества:** «двойная рефлексия»: Critic‑агент → human‑gate.

---

## Плейбук: Конвейер гипотез (спринт 45–60 мин)
1. **Planner**: декомпозиция, критерии готовности, ограничения ресурсов.  
2. **Researcher (параллельно 2×)**: рынок/технологии/аналоги с источниками.  
3. **Analyst**: ценностная гипотеза, риски, ранняя юнит‑экономика.  
4. **PMF‑Tester**: тесты спроса (опрос/лендинг/оферы A/B).  
5. **Critic**: blind‑spots и улучшения.  
6. **Human gate**: отбор 1–2 гипотез.

---

## КМС/Память и мониторинг
- **Memory‑агент:** протокол решений, карта артефактов, ссылки.  
- **Curator‑агент:** пересборка контекста задач (RAG).  
- **Evaluator‑агент:** дашборд качества: coverage источников, дубли, «непроверенные».

---

## Мини‑архитектура
- **Оркестратор:** граф узлов (агенты/люди), рёбра = handoff/правила.  
- **Контекст/инструменты:** MCP‑эндпоинты к КМС, таблицам, поиску; белые списки функций.  
- **Память:** краткосрочная/долгосрочная/деловая (решения и метрики).  
- **Безопасность/стоимость:** лимиты токенов/времени, fallback‑модель, аварийная остановка.  
- **Оценка:** авто‑чек‑листы (coverage, grounding) + human spot‑check.

---

## Специальный фокус: Глава 15 «Межагентная коммуникация»
**Что внедряем на игре:**
- **Контракты интерфейсов**: для каждой роли → формат входа/выхода, SLA, критерии готовности.  
- **Очереди/шины сообщений**: явные каналы обмена (темы: research.facts, analysis.findings, tests.design, decisions…).  
- **Маршрутизация и квоты**: правила передачи задач, ретраи, дедупликация.  
- **Согласование контекста**: версия данных и идентификаторы артефактов.  
- **Устойчивость**: таймауты, компенсационные маршруты (fallback‑ветки), контроль гонок.

**Схема ролей/каналов (упрощённо):**
Planner ⇄ Researcher(ы) ⇄ Analyst ⇄ PMF‑Tester ⇄ Critic ⇄ Human Gate  
Каналы: `brief.in`, `signals.raw`, `findings.synth`, `tests.plan`, `review.flags`, `decisions.out`.

---

## Специальный фокус: Глава 17 «Техники рассуждения»
**Что используем:**
- **CoT/ToT/GoT**: пошаговые/деревья мыслей/цели→под‑цели.  
- **Critic–Developer**: агент‑генератор ↔ агент‑критик (итерации N≤3).  
- **Self‑Consistency**: несколько независимых прогонов и выбор консенсуса.  
- **Дебаты агентов**: короткие аргументы «за/против» с правилом остановки.  
- **Verification Pass**: отдельный проход на проверку предпосылок/ссылок.

**Врезки человека:** принятие спорных веток; подтверждение рисковых предположений; финальный merge альтернатив.

---

## Шаблоны промптов
- **Planner:** «Ты Планировщик… Выход: граф задач (узлы/рёбра), критерии готовности, точки human‑gate».  
- **Critic:** «Проверь результат X по чек‑листу источники/допущения/риски/альтернативы. Вердикт Go/No‑Go и ≤N улучшений».  
- **Memory:** «Собери протокол решения: контекст/варианты/выбранное/почему/ссылки. Обнови карту артефактов».

---

## CliftonStrengths (оставлено в версии MD по запросу)
**Связка ролей с топ‑5 (Intellection, Includer, Woo, Belief, Learner):**  
- Куратор знаний и владелец «качества мышления».  
- Фацилитатор: мост между агентами и людьми.  
- Этический стопер: точки human‑gate.

---

## Чек‑листы запуска
**Перед стартом:** роли+handoff‑правила; доступы MCP; метрики качества/стоимости/скорости.  
**Во время:** спринты 45–60 мин; двойная рефлексия; авто‑лог решений в КМС.  
**После:** ретро по метрикам; что оставить/изменить; обновление шаблонов.
